---
icon: 'ğŸ¤·â€â™€ï¸'
title: 'React Hookì€ ì¡°ê±´ë¶€ë¡œ ì“°ì¼ ìˆ˜ ìˆì„ê¹Œ'
date: '2024-03-03'
category: 'Brief-Dive'
---


ìƒíƒœì— ë”°ë¼ì„œ ì¡°ê±´ ë¶€ë¡œ React Hookì„ ì‹¤í–‰ ì‹œí‚¤ê³  ì‹¶ì—ˆë˜ ì ì´ ìˆì—ˆì„ ê²ƒì´ë‹¤. ì´ëŸ° ê²½ìš° ê¸°ëŒ€ë³´ë‹¤ ì ì€ hooksë¥¼ ì‹¤í–‰ ì‹œì¼°ë‹¤ëŠ” ì—ëŸ¬ë¥¼ ë§Œë‚˜ê²Œ ëœë‹¤.

![ì—ëŸ¬](./images/Pastedimage20240303154954.png)

ì¡°ê±´ë¶€ë¡œ hooks ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ë‹¨ìˆœí•œ ê·œì¹™ì´ì§€ë§Œ ì—¬ëŸ¬ê°€ì§€ ìƒí™©ì„ ë§Œë‚  ìˆ˜ ìˆë‹¤.

### íŠ¹ì • ë‚´ì¥ Hookì´ ì•ˆ ì“°ì´ëŠ” Custom Hookì€ ì¡°ê±´ë¶€ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

```jsx
import { useEffect, useState, useLayoutEffect } from "react";

const useEmptyHook = () => {
Â  console.log("useEmptyHook");
};  

const useCustomHookWithUseEffect = () => {
Â  useEffect(() => {
Â  Â  console.log("useCustomHookWithUseEffect");
Â  }, []);
};

const useCustomHookWithUseState = () => {
Â  const [value, setValue] = useState(0);
};

const useCustomHookWithUseLayoutEffect = () => {
Â  useLayoutEffect(() => {
Â  Â  console.log("useCustomHookWithUseLayoutEffect");
Â  }, []);
}; 

export default function App() {
Â  const [on, setOn] = useState(true);
Â  const toggle = () => setOn(!on);

Â  if (on) {
Â  Â  useEmptyHook(); // ê°€ëŠ¥
Â  Â  useCustomHookWithUseEffect(); // ë¶ˆê°€ëŠ¥
Â  Â  useCustomHookWithUseState(); // ë¶ˆê°€ëŠ¥
Â  Â  useCustomHookWithUseLayoutEffect(); // ë¶ˆê°€ëŠ¥
Â  }

Â  return (
Â  Â  <div className="App">
Â  Â  Â  <h1>ì•ˆë…• ë¦¬ì•¡íŠ¸ í›…</h1>
Â  Â  Â  <button onClick={toggle}>{on ? "ON" : "OFF"}</button>
Â  Â  </div>
Â  );
}
```

ì˜ˆì œ ì½”ë“œë¥¼ ì‹¤í–‰í•´ ë³´ë©´ useState, useEffect, useLayoutEffect ë¥¼ ì•ˆ ì“´ ë‹¨ìˆœíˆ "use" prefixë¡œ ì‹œì‘í•˜ëŠ” Custom Hookì€ ë¬¸ì œ ì—†ì´ ë™ì‘í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

![ì‹¤í–‰ì˜ˆì œ1](./images/condition.gif)

### useContextëŠ” ì¡°ê±´ë¶€ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤

```jsx

import "./styles.css";
import { useState, createContext } from "react";
import { useContext } from "react";

export const AppContext = createContext();

const Test = ({ on }) => {
Â  if (on) {
Â  Â  console.log(useContext(AppContext));
Â  }
};

export default function App() {
Â  const [on, setOn] = useState(true);
Â  const toggle = () => setOn(!on);

Â  return (
Â  Â  <AppContext.Provider value={on}>
Â  Â  Â  <div className="App">
Â  Â  Â  Â  <h1>ì•ˆë…• ë¦¬ì•¡íŠ¸ í›…</h1>
Â  Â  Â  Â  <button onClick={toggle}>{on ? "ON" : "OFF"}</button>
Â  Â  Â  </div>
Â  Â  Â  <Test on={on} />
Â  Â  </AppContext.Provider>
Â  );
}
```

![ì‹¤í–‰ì˜ˆì œ2](./images/condition2.gif)

ìœ„ì™€ ê°™ì´ useContextì˜ ê²½ìš° ë¬¸ì œì—†ì´ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤. ê³§ ë¦¬ì•¡íŠ¸ ìµœì‹  ë²„ì „ì— ì¶”ê°€ë  ë‚´ì¥ Hookì¸ use ê°™ì€ ê²½ìš°ë„ ë¬¸ì œ ì—†ì´ ì¡°ê±´ë¶€ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤ê³  í•œë‹¤.

### ì™œ ì´ëŸ° ê·œì¹™ì´ ìƒê²¼ì„ê¹Œ

ReactëŠ” Fiberë¡œ ë¶ˆë¦¬ìš°ëŠ” ê°€ìƒì˜ DOM ë…¸ë“œë“¤ì´ í•©ì³ì§„ ì—°ê²° ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì§€ê³  í™”ë©´ì„ ê·¸ë¦°ë‹¤. React Hookì€ ë‹¨ìˆœíˆ í•¨ìˆ˜ì´ê¸°ì— í•¨ìˆ˜ë¥¼ ì¡°ê±´ì ìœ¼ë¡œ ì‹¤í–‰í•´ì„œ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ë§Œë“œëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í•˜ê² ì§€ë§Œ íŠ¹ì • ë‚´ì¥ Hook ë“¤ì„ ì‚¬ìš©í•œ ê²½ìš°ëŠ” ì–´ë µë‹¤.

useStateë‚˜ useEffectê°™ì€ ë‚´ì¥ Hookë“¤ì€ ì‹¤í–‰ë˜ë©´ Fiberì•ˆì— ì´ Hookë“¤ì´ ìƒì„±í•œ ê°’ë“¤ê³¼ ìˆœì„œë¡œì„œ ì¡´ì¬í•˜ê²Œ ë˜ê³  ì´ˆê¸° ìƒì„± ì´í›„ ë¦¬ë Œë”ê°€ ìš”ì²­ë˜ë©´ í•´ë‹¹ Hookë“¤ì˜ ê²°ê³¼ë¥¼ ì¬ìƒì„± í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ë¯¸ ìƒì„±ëœ Fiberì•ˆì˜ useState, useEffectì˜ ê²°ê³¼ë¬¼ë“¤ë§Œ ë°”ê¿”ì„œ ê·¸ë¦¬ê²Œ ëœë‹¤. 

>
> ![ì‹¤í–‰ì˜ˆì œ3](./images/rerender.gif)
> 
> ìœ„ ì˜ˆì œì²˜ëŸ¼ setStateê°€ í˜¸ì¶œë˜ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ì¬í˜¸ì¶œ ë˜ì–´ë„ ë‚´ë¶€ì—ì„œ useStateê°€ ë‹¤ì‹œ ì‹¤í–‰ ë˜ì–´ ì´ˆê¸° ê°’ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë³€ê²½ëœ ê°’ìœ¼ë¡œ ì˜ ê·¸ë ¤ì§€ëŠ” ê²ƒì„ ë§ì´ ë³´ì•˜ì„ ê²ƒì´ë‹¤
> 

 ì´ëŸ° êµ¬ì¡° ì•„ë˜ì„œ React Hookì„ ì¡°ê±´ë¶€ë¡œ ì‹¤í–‰í•˜ê²Œ ëœë‹¤ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ì´ˆê¸°ì— ë§Œë“  ë‚´ë¶€ì˜ ë°ì´í„° êµ¬ì¡°ê°€ ë§ê°€ì§€ê²Œ ë˜ê³  ë”ì´ìƒ ì •ìƒì ì¸ ë Œë”ê°€ ì–´ë µê²Œ ëœë‹¤.

```jsx

import { useState } from "react";

export default function App() {
Â  const [on, setOn] = useState(true);
Â  const toggle = () => setOn(!on);
Â  const [name] = on ? useState("stevy") : [];
Â  const [age] = useState(20);

Â  return (
Â  Â  <div className="App">
Â  Â  Â  <h1>ì•ˆë…• ë¦¬ì•¡íŠ¸ í›…</h1>
Â  Â  Â  <button onClick={toggle}>{on ? "ON" : "OFF"}</button>
Â  Â  Â  <div>my name is {name}</div>
Â  Â  Â  <div>my age is {age}</div>
Â  Â  </div>
Â  );
}

```

![ì—ëŸ¬ì˜ˆì œ](./images/Pastedimage20240303221455.png)

ì¼ë°˜ì ìœ¼ë¡œ ì—ëŸ¬ë¡œ ì¸í•´ í•´ë‹¹ ìƒí™©ì˜ ì¬í˜„ì€ ì–´ë µì§€ë§Œ ê°€ìƒì˜ ì˜ˆì œë¥¼ ë“¤ë©´ ìœ„ì™€ ê°™ì€ í˜•íƒœê°€ ë  ê²ƒì´ë‹¤. Fiber êµ¬ì¡°ì—ì„œ useStateê°€ ìƒì„±í•œ ê°’ë“¤ì˜ ì¡´ì¬ëŠ” í•­ìƒ ë³´ì¥ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ì˜ ì¬í˜¸ì¶œì‹œ í•´ë‹¹ useStateë¥¼ ì²«ë²ˆì§¸ í˜¸ì¶œê³¼ ë‹¬ë¦¬ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ Fiber ë‚´ë¶€ì— ìƒì„±í•œ ìƒíƒœ ìˆœì„œê°€ ê¼¬ì´ê²Œ ëœë‹¤.

useContextì˜ ê²½ìš°ëŠ” ì–´ë–»ê²Œ ì¡°ê±´ì ìœ¼ë¡œ ì“¸ìˆ˜ ìˆëŠ” ê²ƒì¼ê¹Œ? useContextì˜ ê²½ìš°ëŠ” ì „ì—­ ìƒíƒœì´ê¸° ë•Œë¬¸ì— Fiber ë‚´ë¶€ì—ì„œ ìˆœì„œ ì˜ì¡´ì ì¸ í˜•íƒœë¡œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì¡°ê±´ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë„ Fiber ë‚´ë¶€ì˜ ë°ì´í„° êµ¬ì¡°ì— ì˜í–¥ì„ ë¼ì¹˜ì§€ ì•ŠëŠ”ë‹¤.

### ì°¸ê³  : ê·¸ë˜ë„ í›…ì„ ì¡°ê±´ë¶€ë¡œ ì“°ê³  ì‹¶ë‹¤ë©´ ë°©ë²•ì´ ìˆë‹¤

ë¦¬ì•¡íŠ¸ì—ì„œ ì¡°ê±´ë¶€ë¡œ í›…ì„ ì“°ëŠ” ê±´ ì–´ë µì§€ë§Œ ì»´í¬ë„ŒíŠ¸ëŠ” ì¡°ê±´ë¶€ë¡œ ì“°ëŠ”ê²Œ ê°€ëŠ¥í•˜ë‹¤, ì˜ˆì œë¥¼ ë³´ì

```jsx
import React, { useEffect, useState, useLayoutEffect } from "react";

const CustomHookWithUseEffect = () => {
  useEffect(() => {
    console.log("useCustomHookWithUseEffect"); // í›…ì˜ ë¡œì§ë§Œ ë‚´ë¶€ì—ì„œ ì‚¬ìš©
  }, []);

  return null; // ì•„ë¬´ê²ƒë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ ìƒì„±
};

const CustomHookWithUseState = () => {
  const [value, setValue] = useState(0);

  return null
};

const CustomHookWithUseLayoutEffect = () => {
  useLayoutEffect(() => {
    console.log("useCustomHookWithUseLayoutEffect");
  }, []);

  return null
};

function App() {
  const [on, setOn] = useState(true);
  const toggle = () => setOn(!on);

  return (
    <div className="App">
      <h1>ì•ˆë…• ë¦¬ì•¡íŠ¸ í›…</h1>
      <button onClick={toggle}>{on ? "ON" : "OFF"}</button>
      {
        on && ( // ì •ìƒ ì‘ë™
          <>
            <CustomHookWithUseEffect/>
            <CustomHookWithUseState/>
            <CustomHookWithUseLayoutEffect/>
          </>
        )
      }
    </div>
  );
}
```

ì´ ë°©ë²•ì´ ì™„ë²½í•œ í•´ë²•ì´ ë˜ì§€ ì•Šì„ ìˆ˜ ë„ ìˆê² ì§€ë§Œ í›…ì˜ ì‚¬ìš© ì´ìœ ë¥¼ ë„ë©”ì¸ ë¡œì§ì˜ ì¶”ìƒí™”ë¼ê³  ìƒê°í–ˆì„ ë•ŒëŠ” ì¶©ë¶„íˆ ê³ ë ¤í•  ë§Œí•œ ì„¤ê³„ ë°©ë²•ì´ ë  ìˆ˜ ìˆë‹¤. ë‚´ê°€ contentEditable ìš”ì†Œë¥¼ ë‹¤ë¤„ì•¼ í•  ë•Œ ìì£¼ ì“°ëŠ” Lexicalì˜ ê²½ìš°ì—ë„ ì´ëŸ° ì„¤ê³„ ë°©ë²•ì„ ë§ì´ ë³´ì—¬ì¤€ë‹¤.

```jsx
<LexicalComposer initialConfig={initialConfig}>
  <PlainTextPlugin
    contentEditable={<ContentEditable />}
    placeholder={<div>Enter some text...</div>}
  />
  <HistoryPlugin />
  <OnChangePlugin onChange={onChange} />
  ...
</LexicalComposer>
```

```jsx
export function OnChangePlugin(...) {
  const [editor] = useLexicalComposerContext();

  useLayoutEffect(() => {
    if (onChange) {
      return editor.registerUpdateListener(
        ({editorState, dirtyElements, dirtyLeaves, prevEditorState, tags}) => {
          if (
            (ignoreSelectionChange &&
              dirtyElements.size === 0 &&
              dirtyLeaves.size === 0) ||
            (ignoreHistoryMergeTagChange && tags.has('history-merge')) ||
            prevEditorState.isEmpty()
          ) {
            return;
          }

          onChange(editorState, editor, tags);
        },
      );
    }
  }, [editor, ignoreHistoryMergeTagChange, ignoreSelectionChange, onChange]);

  return null; // ì•„ë¬´ê²ƒë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ ìƒì„±
}
```

https://lexical.dev/docs/react/plugins

ìœ„ì™€ ê°™ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ìš©í•´ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë¶„ë¦¬í•˜ê³  ì‹¤ì œ ë Œë”ë˜ëŠ” jsxìš”ì†Œë“¤ì€ ë°˜í™˜í•˜ì§€ ì•Šê³  ìˆë‹¤. ì»´í¬ë„ŒíŠ¸ë¥¼ ì¼ì¢…ì˜ DI ì»¨í…Œì´ë„ˆì²˜ëŸ¼ ì“¸ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë°©ë²• ê°™ë‹¤. í›…ì´ ì•„ë‹ˆë¼ ì»´í¬ë„ŒíŠ¸ì´ê¸°ì— ì¡°ê±´ë¶€ë¡œ í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì„ ì“¸ì§€ ì •í•  ìˆ˜ ë„ ìˆë‹¤.

### ì°¸ê³ 

[You Canâ€™t Use Hooks Conditionallyâ€¦ or Can You?](https://portal.gitnation.org/contents/you-cant-use-hooks-conditionally-or-can-you)
