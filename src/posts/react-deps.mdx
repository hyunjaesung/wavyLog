---
icon: 'ğŸ§¬'
title: 'React Hookì˜ ì˜ì¡´ì„± ë°°ì—´ì— ëŒ€í•´'
date: '2024-03-10'
category: 'Brief-Dive'
---

ìµœê·¼ ë™ë£Œ ë¶„ì´ useEffectì˜ ì˜ì¡´ì„± ë°°ì—´ì—ëŠ” useRefì˜ ê°’ì´ ë“¤ì–´ê°€ë©´ ì•ˆëœë‹¤ê³  ì½”ë“œ ë¦¬ë·°ë¥¼ í•´ì£¼ì…¨ë‹¤. í•˜ì§€ë§Œ ë¶„ëª… useRefì˜ currentê°’ì´ ë“¤ì–´ê°ˆ ë•Œì™€ ì•ˆ ë“¤ì–´ê°ˆ ë•Œê°€ ì°¨ì´ê°€ ìˆì—ˆë‹¤. ê·¸ ì°¨ì´ë¥¼ ì¸ì‹í•˜ê³  í•´ë‹¹ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„ì„ í–ˆê¸°ì— í˜¼ë€ìŠ¤ëŸ¬ì› ë‹¤. ì•„ë˜ ì˜ˆì œë¥¼ ë³´ì

### ì˜ˆì œ 1. useRef ê°’ì„ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ì–´ì„œ ìƒê¸´ ì°¨ì´

```jsx
import React, { useState, useRef, useEffect } from 'react'

const App = () => {
  const [count, setCount] = useState(0)
  const countRef = useRef(0)

  useEffect(() => {
    console.log("REF EFFECT TRIGGER", countRef.current)
  }, [countRef.current])

  return (
    <div>
      <button onClick={() => setCount(count + 1)}> STATE COUNT UP </button>
      <span>STATE COUNT {count}</span> 
      <button onClick={() => {countRef.current += 1}}> REF COUNT UP </button>
      <span >REF COUNT {countRef.current}</span> 
    </div>
  )
}

export default App

```
!(ì˜ˆì œ1)[./images/def-example1.gif]

```jsx

import React, { useState, useRef, useEffect } from 'react'

const App = () => {
...

  useEffect(() => {
    console.log("REF EFFECT TRIGGER", countRef.current)
  }, [])

...
}

export default App


```
!(ì˜ˆì œ2)[./images/def-example2.gif]


ìœ„ ì˜ˆì œì™€ ê°™ì´ useRefë¥¼ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ì€ ê²½ìš°ì—ëŠ” ë‹¤ë¥¸ triggerì— ì˜í•´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ì¬í˜¸ì¶œ ë˜ì—ˆì„ ë•Œ useRefë¥¼ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ì€ effectê°€ ì‹¤í–‰ì´ ëœë‹¤. ë°˜ë©´, ì˜ì¡´ì„± ë°°ì—´ì— ë„£ì§€ ì•Šì€ effectëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ë¶„ëª… ë™ì‘ì˜ ì°¨ì´ëŠ” ìˆë‹¤. í•˜ì§€ë§Œ ì´ê²ƒì€ Reactê°€ ë°”ë¼ì§€ ì•ŠëŠ” ì‚¬ì´ë“œ ì´í™íŠ¸ë‹¤. 

ReactëŠ” Hookì˜ ì˜ì¡´ì„± ë°°ì—´ì— ë‹¤ì‹œ ë Œë”ë§ì„ triggerì‹œí‚¤ëŠ” ê°’ë§Œ ë„£ë„ë¡ ê¶Œê³ í•˜ê³  ìˆë‹¤. í™”ë©´ì„ ê·¸ë¦¬ëŠ”ë° ìˆì–´ì„œ í° ì´ìŠˆë¥¼ ìœ ë°œ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¼ ErrorëŠ” ë‚´ë³´ë‚´ê³  ìˆì§€ ì•Šì§€ë§Œ ì¶”ì ë˜ê¸° ì–´ë ¤ìš´ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— triggerë¥¼ ìœ ë°œí•˜ì§€ ì•ŠëŠ” ê°’ì„ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ëŠ” ê²ƒì€ ì§€ì–‘í•˜ë„ë¡ ê¶Œí•˜ê³  ìˆë‹¤.

### ì˜ˆì œ 2. useRef ê°’ì„ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ê³  ì‹¶ì€ ê²½ìš°

```jsx

import React, { useState, useRef, useEffect } from 'react'

const fakeAPICall = () => new Promise(
  (resolve) => {
    setTimeout(resolve, 1000)
  }
)

const App = () => {
  const [state, setState] = useState(null);
  const [title, setTitle] = useState('');
  const ref = useRef(null)

  useEffect(() => { // 1. ë°ì´í„°ë¥¼ í˜¸ì¶œí•˜ê³  stateì— ë„£ê¸°
    fakeAPICall().then(() => {
      setState({
        data: 'good'
      })
    }) 
  }, [])
  
  useEffect(() => { // 3 ref.currentê°€ ìˆë‹¤ë©´ ìŠ¤íƒ€ì¼ ë³€ê²½í•˜ê¸°
    if(ref.current){
      ref.current.style.color = 'blue'
    }
  }, [ref.current])

  useEffect(() => { // 2. stateê°€ ìˆë‹¤ë©´ titleì— ë„£ê¸°
    if(state){
      setTitle(`${state.data} Component`)
    } 
  }, [state])


  return (
    <div>
      {
        state && (<div ref={ref}> {title} </div>)
      }
    </div>
  )
}

export default App

```
!(ì˜ˆì œ3)[./images/def2-example1.gif]


ìœ„ì˜ ì˜ˆì œ ê°™ì€ ê²½ìš°ì—ëŠ” ref.currentê°€ ì˜ì¡´ì„± ë°°ì—´ì— ìˆì–´ì•¼ ì›í•˜ëŠ” ì‚¬ì´ë“œ ì´í™íŠ¸ê°€ ìƒê¸°ëŠ” ì˜ˆì œì´ë‹¤. setState -> setTitle -> ref.current ë³€ê²½ìœ¼ë¡œ ì´ì–´ì§€ëŠ” ê³¼ì •ìœ¼ë¡œ APIí˜¸ì¶œì´ ì™„ë£Œë˜ê³  titleì´ ì„¤ì •ë˜ë©´ ìŠ¤íƒ€ì¼ ë³€ê²½ì„ í•´ì„œ ì›í•˜ëŠ” ë Œë”ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤. ì˜ì¡´ì„± ë°°ì—´ì— ì—†ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ styleì´ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤.

!(ì˜ˆì œ4)[./images/def2-example2.gif]

ì´ë¥¼ ë¦¬ì•¡íŠ¸ê°€ ê¶Œê³ í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë‹¤ì‹œ ì“´ë‹¤ë©´ useRef ì“°ëŠ” ë¶€ë¶„ì„ ì¬í˜¸ì¶œì„ triggerí•˜ëŠ” useStateë¡œ ë°”ê¿”ì„œ ì“°ë©´ ëœë‹¤.

```jsx

import React, { useState, useRef, useEffect } from 'react'

...

const App = () => {
  const [state, setState] = useState(null);
  const [title, setTitle] = useState('');
  const [ref, setRef] = useState(null)

  useEffect(() => { // 1. ë°ì´í„°ë¥¼ í˜¸ì¶œí•˜ê³  stateì— ë„£ê¸°
    fakeAPICall().then(() => {
      setState({
        data: 'good'
      })
    }) 
  }, [])
  
  useEffect(() => { // 2. refê°€ ìˆë‹¤ë©´ ìŠ¤íƒ€ì¼ ë³€ê²½í•˜ê¸°
    if(ref){
      ref.style.color = 'blue'
    }
  }, [ref])

  useEffect(() => { // 2. stateê°€ ìˆë‹¤ë©´ titleì— ë„£ê¸°
    if(state){
      setTitle(`${state.data} Component`)
    } 
  }, [state])


  return (
    <div>
      {
        state && (<div ref={setRef}> {title} </div>)
      }
    </div>
  )
}

export default App

```

### react-hooks eslintë£°ì„ ì‚¬ìš©í•˜ì
í•´ë‹¹ ì‚¬ì´ë“œ ì´í™íŠ¸ëŠ” ì—ëŸ¬ë¥¼ ìœ ë°œí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— eslintë£°ì— ì´ˆëŒ€ë¥¼ í•´ì•¼ í•œë‹¤. ë‚˜ì˜ ì‹¤ìˆ˜ê°€ ì‘ì„±ì¤‘ì´ ì•„ë‹Œ ì½”ë“œ ë¦¬ë·°ì—ì„œ ë°œê²¬ëœ ê²ƒë„ react-hook eslint ë£°ì„ ì„¤ì • í•´ë†“ì§€ ì•Šê¸° ë•Œë¬¸ì— ê·¸ë ‡ê²Œ ë˜ì—ˆë‹¤. í•´ë‹¹ ë£°ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ useRefê°’ì„ ì˜ì¡´ì„± ë°°ì—´ë¡œ ì“°ê²Œ ë˜ì—ˆì„ ë•Œ react-hooks/exhaustive-deps ê²½ê³  í˜¹ì€ ì—ëŸ¬ (ì„¤ì •ì— ë”°ë¼ ë‹¤ë¥´ë‹¤) ë¥¼ ë§Œë‚  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

### ì •ë¦¬
- React Hookì˜ ì˜ì¡´ì„± ë°°ì—´ì—ëŠ” ì¬ë Œë”ë¥¼ ìœ ë°œí•˜ëŠ” ìƒíƒœë§Œ ë„£ì
- ë¦¬ì•¡íŠ¸ì—ì„œ ì§ì ‘ì ìœ¼ë¡œ ì—ëŸ¬ëŠ” ë‚´ì§€ ì•Šê¸° ë•Œë¬¸ì— eslintë£°ë¡œ ë§‰ì•„ë³¼ ìˆ˜ ìˆë‹¤
